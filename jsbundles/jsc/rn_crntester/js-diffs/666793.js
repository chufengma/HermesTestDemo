__d(function(g,r,i,a,m,e,d){'use strict';function t(t){return Math.round(t/1e3)}var n=(function(t){function n(){return r(d[1])(this,n),r(d[2])(this,r(d[3])(n).apply(this,arguments))}return r(d[0])(n,t),r(d[4])(n,[{key:"render",value:function(){return r(d[5]).createElement(r(d[6]).ProgressBarAndroid,{progress:this.props.progress,styleAttr:"Horizontal",indeterminate:!1})}}]),n})(r(d[5]).Component),s=(function(s){function l(){var t,n;r(d[1])(this,l);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(n=r(d[2])(this,(t=r(d[3])(l)).call.apply(t,[this].concat(o)))).state={downloading:!1,contentLength:1,responseLength:0,progressTotal:1,progressLoaded:0,readystateHandler:!1,progressHandler:!0,arraybuffer:!1},n.xhr=null,n.cancelled=!1,n._download=function(){var t;n.xhr?(t=n.xhr).abort():t=n.xhr=new XMLHttpRequest;n.state.readystateHandler&&(t.onreadystatechange=function(){if(t.readyState===t.HEADERS_RECEIVED){var s=parseInt(t.getResponseHeader('Content-Length'),10);n.setState({contentLength:s,responseLength:0})}else t.readyState===t.LOADING&&t.response&&n.setState({responseLength:t.response.length})}),n.state.progressHandler&&(t.onprogress=function(t){n.setState({progressTotal:t.total,progressLoaded:t.loaded})}),n.state.arraybuffer&&(t.responseType='arraybuffer'),t.onload=function(){if(n.setState({downloading:!1}),n.cancelled)n.cancelled=!1;else if(200===t.status){var s="Response is a string, "+t.response.length+" characters long.";t.response instanceof ArrayBuffer&&(s="Response is an ArrayBuffer, "+t.response.byteLength+" bytes long."),r(d[6]).Alert.alert('Download complete!',s)}else 0!==t.status?r(d[6]).Alert.alert('Error',"Server returned HTTP status of "+t.status+": "+t.responseText):r(d[6]).Alert.alert('Error',t.responseText)},t.open('GET','http://aleph.gutenberg.org/cache/epub/100/pg100.txt.utf8'),t.setRequestHeader('Accept-Encoding',''),t.send(),n.setState({downloading:!0})},n}return r(d[0])(l,s),r(d[4])(l,[{key:"componentWillUnmount",value:function(){this.cancelled=!0,this.xhr&&this.xhr.abort()}},{key:"render",value:function(){var s=this,l=this.state.downloading?r(d[5]).createElement(r(d[6]).View,{style:o.wrapper},r(d[5]).createElement(r(d[6]).View,{style:o.button},r(d[5]).createElement(r(d[6]).Text,null,"Downloading..."))):r(d[5]).createElement(r(d[6]).TouchableHighlight,{style:o.wrapper,onPress:this._download},r(d[5]).createElement(r(d[6]).View,{style:o.button},r(d[5]).createElement(r(d[6]).Text,null,"Download 5MB Text File"))),c=null,u=null;if(this.state.readystateHandler&&!this.state.arraybuffer){var p=this.state,h=p.responseLength,f=p.contentLength;c=r(d[5]).createElement(r(d[6]).View,null,r(d[5]).createElement(r(d[6]).Text,{style:o.progressBarLabel},"responseText: ",t(h),"/",t(f),"k chars"),r(d[5]).createElement(n,{progress:h/f}))}if(this.state.progressHandler){var y=this.state,w=y.progressLoaded,E=y.progressTotal;u=r(d[5]).createElement(r(d[6]).View,null,r(d[5]).createElement(r(d[6]).Text,{style:o.progressBarLabel},"onprogress: ",t(w),"/",t(E),' ',"KB"),r(d[5]).createElement(n,{progress:w/E}))}return r(d[5]).createElement(r(d[6]).View,null,r(d[5]).createElement(r(d[6]).View,{style:o.configRow},r(d[5]).createElement(r(d[6]).Text,null,"onreadystatechange handler"),r(d[5]).createElement(r(d[6]).Switch,{value:this.state.readystateHandler,onValueChange:function(t){return s.setState({readystateHandler:t})}})),r(d[5]).createElement(r(d[6]).View,{style:o.configRow},r(d[5]).createElement(r(d[6]).Text,null,"onprogress handler"),r(d[5]).createElement(r(d[6]).Switch,{value:this.state.progressHandler,onValueChange:function(t){return s.setState({progressHandler:t})}})),r(d[5]).createElement(r(d[6]).View,{style:o.configRow},r(d[5]).createElement(r(d[6]).Text,null,"download as arraybuffer"),r(d[5]).createElement(r(d[6]).Switch,{value:this.state.arraybuffer,onValueChange:function(t){return s.setState({arraybuffer:t})}})),l,c,u)}}]),l})(r(d[5]).Component),o=r(d[6]).StyleSheet.create({wrapper:{borderRadius:5,marginBottom:5},button:{backgroundColor:'#eeeeee',padding:8},progressBarLabel:{marginTop:12,marginBottom:8},configRow:{flexDirection:'row',paddingVertical:8,alignItems:'center',justifyContent:'space-between'}});m.exports=s},666793,[614,616,617,620,621,514,516]);