__d(function(g,r,i,a,m,e,d){'use strict';function t(t,n){if(t.length!==n.length)return!0;for(var s=0;s<t.length;s++)if(t[s]!==n[s])return!0;return!1}var n=(function(n){function o(){var t,n;r(d[1])(this,o);for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return(n=r(d[2])(this,(t=r(d[3])(o)).call.apply(t,[this].concat(u)))).state=n.getInitialState(),n.fetch=function(t){n.state.loadingMore||n.setState({loadingMore:!0},function(){n._fetch(t)})},n._renderFooterSpinner=function(){return n.state.noMore?null:r(d[4]).createElement(r(d[5]).ActivityIndicator,null)},n._renderRow=function(t,o,c){var u=t.map(function(t){return null===t?null:n.props.renderImage(t)});return r(d[4]).createElement(r(d[5]).View,{style:s.row},u)},n._onEndReached=function(){n.state.noMore||n.fetch()},n}return r(d[0])(o,n),r(d[6])(o,[{key:"getInitialState",value:function(){return{assets:[],lastCursor:null,noMore:!1,loadingMore:!1,dataSource:new(r(d[5]).ListView.DataSource)({rowHasChanged:t})}}},{key:"rendererChanged",value:function(){var n=new(r(d[5]).ListView.DataSource)({rowHasChanged:t});this.state.dataSource=n.cloneWithRows(r(d[7])(this.state.assets,this.props.imagesPerRow))}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){this.props.groupTypes!==t.groupTypes&&this.fetch(!0)}},{key:"_fetch",value:function(t){var n,s;return r(d[8]).async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t){o.next=3;break}return this.setState(this.getInitialState(),this.fetch),o.abrupt("return");case 3:return o.next=6,r(d[8]).awrap(r(d[5]).PermissionsAndroid.request(r(d[5]).PermissionsAndroid.PERMISSIONS.READ_EXTERNAL_STORAGE,{title:'Permission Explanation',message:'RNTester would like to access your pictures.'}));case 6:if('granted'===o.sent){o.next=10;break}return r(d[5]).Alert.alert('Access to pictures was denied.'),o.abrupt("return");case 10:return delete(n={first:this.props.batchSize,groupTypes:this.props.groupTypes,assetType:this.props.assetType}).groupTypes,this.state.lastCursor&&(n.after=this.state.lastCursor),o.prev=13,o.next=16,r(d[8]).awrap(r(d[5]).CameraRoll.getPhotos(n));case 16:s=o.sent,this._appendAssets(s),o.next=23;break;case 20:o.prev=20,o.t0=o.catch(13),r(d[9])(o.t0);case 23:case"end":return o.stop()}},null,this,[[13,20]])}},{key:"render",value:function(){return r(d[4]).createElement(r(d[5]).ListView,{renderRow:this._renderRow,renderFooter:this._renderFooterSpinner,onEndReached:this._onEndReached,style:s.container,dataSource:this.state.dataSource,enableEmptySections:!0})}},{key:"_appendAssets",value:function(t){var n=t.edges,s={loadingMore:!1};t.page_info.has_next_page||(s.noMore=!0),n.length>0&&(s.lastCursor=t.page_info.end_cursor,s.assets=this.state.assets.concat(n),s.dataSource=this.state.dataSource.cloneWithRows(r(d[7])(s.assets,this.props.imagesPerRow))),this.setState(s)}}]),o})(r(d[4]).Component);n.defaultProps={groupTypes:'SavedPhotos',batchSize:5,imagesPerRow:1,assetType:'Photos',renderImage:function(t){var n=[s.image,{width:150,height:150}];return r(d[4]).createElement(r(d[5]).Image,{source:t.node.image,style:n})}};var s=r(d[5]).StyleSheet.create({row:{flexDirection:'row',flex:1},image:{margin:4},container:{flex:1}});m.exports=n},666764,[614,616,617,620,514,516,621,666765,682,83]);